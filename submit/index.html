<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Submit a Post â€” IndyPhilo</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; background: #f2f0eb; color: #1a1520; line-height: 1.6; }
    a { color: inherit; text-decoration: none; }

    .page-wrap { max-width: 900px; margin: 0 auto; padding: 2rem; }
    .section-label { font-size: 0.64rem; font-weight: 700; letter-spacing: 0.22em; text-transform: uppercase; color: #7c5cbf; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem; }
    .section-label::after { content: ''; flex: 1; height: 1px; background: #e0dbd4; }

    .page-header { padding-bottom: 1.5rem; border-bottom: 1px solid #e0dbd4; margin-bottom: 2rem; }
    .page-header h1 { font-family: Georgia, serif; font-size: clamp(1.8rem, 4vw, 2.4rem); margin-bottom: 0.35rem; }
    .page-header p { font-size: 0.88rem; color: #6b6478; line-height: 1.7; max-width: 560px; }

    .form-layout { display: grid; grid-template-columns: 1fr 340px; gap: 2.5rem; align-items: start; }
    @media (max-width: 780px) { .form-layout { grid-template-columns: 1fr; } }

    /* FORM */
    .form-card { background: #fff; border: 1px solid #e0dbd4; border-radius: 3px; padding: 1.75rem; }
    .field { margin-bottom: 1.25rem; }
    .field label { display: block; font-size: 0.71rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: #6b6478; margin-bottom: 0.45rem; }
    .field input, .field select, .field textarea { width: 100%; border: 1px solid #e0dbd4; border-radius: 2px; padding: 0.6rem 0.85rem; font-size: 0.9rem; font-family: inherit; color: #1a1520; background: #fff; outline: none; transition: border-color 0.15s; }
    .field input:focus, .field select:focus, .field textarea:focus { border-color: #7c5cbf; box-shadow: 0 0 0 3px rgba(124,92,191,0.08); }
    .field textarea { resize: vertical; min-height: 280px; line-height: 1.7; }
    .field-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }

    /* EMOJI PICKER */
    .emoji-picker { display: grid; grid-template-columns: repeat(8, 1fr); gap: 0.3rem; margin-top: 0.5rem; }
    .emoji-opt { font-size: 1.4rem; padding: 0.35rem; border: 2px solid transparent; border-radius: 3px; cursor: pointer; text-align: center; transition: all 0.12s; background: #f2f0eb; }
    .emoji-opt:hover { border-color: #c4b5e8; background: #ede8f5; }
    .emoji-opt.selected { border-color: #7c5cbf; background: #ede8f5; }
    .emoji-display { font-size: 1.8rem; min-height: 2.5rem; display: flex; align-items: center; }
    .or-divider { text-align: center; font-size: 0.7rem; color: #a09898; letter-spacing: 0.1em; text-transform: uppercase; margin: 0.75rem 0; }

    /* IMAGE DROP */
    .drop-zone { border: 2px dashed #e0dbd4; border-radius: 3px; padding: 1.5rem 1rem; text-align: center; cursor: pointer; transition: all 0.15s; background: #f7f5f2; }
    .drop-zone:hover, .drop-zone.drag-over { border-color: #7c5cbf; background: #ede8f5; }
    .drop-zone p { font-size: 0.82rem; color: #a09898; margin-top: 0.4rem; }
    .drop-zone input[type=file] { display: none; }
    .img-preview { width: 100%; height: 140px; object-fit: cover; border-radius: 2px; border: 1px solid #e0dbd4; margin-top: 0.5rem; display: none; }

    /* SUBMIT */
    .submit-btn { background: #7c5cbf; color: #fff; border: none; width: 100%; padding: 0.85rem; font-size: 0.8rem; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase; border-radius: 2px; cursor: pointer; transition: background 0.2s; margin-top: 0.5rem; }
    .submit-btn:hover { background: #5a3d96; }

    /* PREVIEW PANEL */
    .preview-panel { position: sticky; top: 112px; }
    .preview-card { background: #fff; border: 1px solid #e0dbd4; border-radius: 3px; overflow: hidden; }
    .preview-label { font-size: 0.63rem; font-weight: 700; letter-spacing: 0.2em; text-transform: uppercase; color: #7c5cbf; padding: 0.75rem 1rem 0.5rem; border-bottom: 1px solid #e0dbd4; }
    .preview-img { height: 130px; display: flex; align-items: center; justify-content: center; font-size: 2.8rem; background: #ede8f5; border-bottom: 1px solid #e0dbd4; overflow: hidden; }
    .preview-img img { width: 100%; height: 100%; object-fit: cover; }
    .preview-body { padding: 0.9rem 1rem; }
    .preview-tag { display: inline-block; font-size: 0.62rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; padding: 0.18rem 0.5rem; border: 1px solid #c4b5e8; border-radius: 2px; color: #5a3d96; background: #ede8f5; }
    .preview-title { font-family: Georgia, serif; font-size: 1rem; line-height: 1.3; margin: 0.45rem 0 0.3rem; color: #1a1520; }
    .preview-desc { font-size: 0.81rem; color: #6b6478; line-height: 1.6; }
    .preview-meta { font-size: 0.71rem; color: #a09898; font-style: italic; margin-top: 0.5rem; }

    /* SUCCESS */
    .success-overlay { display: none; position: fixed; inset: 0; background: rgba(26,21,32,0.7); z-index: 1000; align-items: center; justify-content: center; }
    .success-overlay.show { display: flex; }
    .success-box { background: #fff; border-radius: 4px; padding: 2.5rem 2rem; text-align: center; max-width: 420px; border-top: 4px solid #e8b84b; }
    .success-box h2 { font-family: Georgia, serif; font-size: 1.4rem; margin-bottom: 0.6rem; }
    .success-box p { font-size: 0.88rem; color: #6b6478; line-height: 1.7; }
    .success-box a { display: inline-block; margin-top: 1.25rem; background: #7c5cbf; color: #fff; padding: 0.6rem 1.5rem; font-size: 0.78rem; font-weight: 700; letter-spacing: 0.12em; text-transform: uppercase; border-radius: 2px; }

    footer { background: #1a1520; border-top: 3px solid #e8b84b; padding: 2rem 2rem 0; margin-top: 3rem; }
    .footer-bottom { max-width: 1220px; margin: 0 auto; padding: 1rem 0; font-size: 0.67rem; color: #4a4055; }

    /* â”€â”€ SINGLE-ROW HEADER â”€â”€ */
    .site-header { background: #fff; border-bottom: 1px solid #e0dbd4; position: sticky; top: 0; z-index: 500; box-shadow: 0 1px 6px rgba(0,0,0,0.06); }
    .header-inner { display: flex; align-items: center; justify-content: space-between; padding: 0 2.5rem; height: 62px; max-width: 1320px; margin: 0 auto; }
    .logo-wrap { display: flex; flex-direction: column; line-height: 1; flex-shrink: 0; }
    .logo-name { font-family: Georgia, serif; font-size: 1.45rem; font-weight: 700; color: #1a1520; letter-spacing: -0.02em; }
    .logo-name span { color: #7c5cbf; }
    .logo-tagline { font-size: 0.55rem; letter-spacing: 0.2em; text-transform: uppercase; color: #b0a8ba; font-style: italic; margin-top: 1px; }
    .header-nav { display: flex; align-items: center; gap: 0; height: 62px; }
    .nav-item { position: relative; height: 62px; display: flex; align-items: center; }
    .nav-link { display: flex; align-items: center; gap: 0.25rem; padding: 0 1rem; height: 62px; font-size: 0.78rem; letter-spacing: 0.05em; font-weight: 500; color: #4a4055; white-space: nowrap; transition: color 0.15s; cursor: pointer; border-bottom: 2px solid transparent; }
    .nav-link:hover, .nav-link.active { color: #7c5cbf; border-bottom-color: #e8b84b; }
    .nav-link .caret { font-size: 0.55rem; opacity: 0.6; margin-left: 1px; transition: transform 0.15s; }
    .nav-item:hover .caret { transform: rotate(180deg); }
    .dropdown { position: absolute; top: calc(100% + 1px); left: 0; background: #fff; border-radius: 6px; border: 1px solid #e0dbd4; box-shadow: 0 8px 28px rgba(0,0,0,0.12); min-width: 200px; opacity: 0; pointer-events: none; transform: translateY(6px); transition: opacity 0.15s, transform 0.15s; z-index: 600; overflow: hidden; }
    .nav-item:hover > .dropdown { opacity: 1; pointer-events: all; transform: none; }
    .dropdown a { display: flex; align-items: center; gap: 0.6rem; padding: 0.7rem 1.1rem; font-size: 0.83rem; color: #3d3647; border-bottom: 1px solid #f5f0ea; transition: background 0.1s, color 0.1s; }
    .dropdown a:last-child { border-bottom: none; }
    .dropdown a:hover { background: #7c5cbf; color: #fff; }
    .nav-submit { background: #7c5cbf; color: #fff !important; border-radius: 4px; padding: 0.45rem 1.1rem !important; height: auto !important; border-bottom: none !important; font-weight: 600 !important; margin-left: 0.5rem; transition: background 0.15s !important; }
    .nav-submit:hover { background: #5a3d96 !important; color: #fff !important; border-bottom: none !important; }
    .header-search { display: flex; align-items: center; gap: 0.4rem; border: 1px solid #e0dbd4; border-radius: 18px; padding: 0.28rem 0.8rem; background: #f7f5f2; margin-right: 0.25rem; }
    .header-search input { border: none; background: transparent; font-size: 0.8rem; width: 130px; outline: none; color: #1a1520; }
    .header-search input::placeholder { color: #b8b3c2; }
    .hamburger { display: none; flex-direction: column; gap: 5px; background: none; border: none; padding: 4px; cursor: pointer; }
    .hamburger span { display: block; width: 22px; height: 2px; background: #1a1520; }
    .mobile-menu { display: none; flex-direction: column; background: #fff; border-bottom: 1px solid #e0dbd4; }
    .mobile-menu.open { display: flex; }
    .mobile-menu a { padding: 0.75rem 2rem; font-size: 0.88rem; border-bottom: 1px solid #f5f0ea; color: #1a1520; }
    .mobile-menu a.sub { padding-left: 3rem; font-size: 0.82rem; color: #6b6478; }
    .mobile-menu a:hover { background: #fffbf0; }
    @media (max-width: 820px) { .hamburger { display: flex; } .header-nav, .header-search { display: none; } }
  </style>
</head>
<body>

<header class="site-header">
  <div class="header-inner">
    <a href="/" class="logo-wrap">
      <span class="logo-name">Indy<span>Philo</span></span>
      <span class="logo-tagline">dare to think</span>
    </a>
    <nav class="header-nav">
      <div class="nav-item"><a href="/" class="nav-link ">Home</a></div>
      <div class="nav-item">
        <a href="/journal/" class="nav-link ">Journal <span class="caret">â–¼</span></a>
        <div class="dropdown">
          <a href="/journal/">ğŸ“– All Posts</a>
          <a href="/journal/?career=medicine">ğŸ¥ Medicine</a>
          <a href="/journal/?career=law">âš–ï¸ Law</a>
          <a href="/journal/?career=finance">ğŸ“ˆ Finance</a>
          <a href="/journal/?career=psychology">ğŸ§  Psychology</a>
          <a href="/journal/?career=computer-science">ğŸ’» Computer Science</a>
          <a href="/journal/?career=general">ğŸ” General</a>
        </div>
      </div>
      <div class="nav-item">
        <a href="/careers/" class="nav-link ">Careers <span class="caret">â–¼</span></a>
        <div class="dropdown">
          <a href="/careers/#medicine">ğŸ¥ Medicine</a>
          <a href="/careers/#law">âš–ï¸ Law</a>
          <a href="/careers/#finance">ğŸ“ˆ Finance</a>
          <a href="/careers/#psychology">ğŸ§  Psychology</a>
          <a href="/careers/#computer-science">ğŸ’» Computer Science</a>
          <a href="/careers/#general">ğŸ” General</a>
        </div>
      </div>
      <div class="nav-item"><a href="/about/" class="nav-link ">About</a></div>
      <div class="nav-item"><a href="/join/" class="nav-link ">Join</a></div>
      
    <div class="header-search">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#b8b3c2" stroke-width="2.5"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input type="text" placeholder="Search..." oninput="typeof handleSearch!=='undefined'&&handleSearch(this.value)" />
    </div>
      <div class="nav-item"><a href="/submit/" class="nav-link nav-submit">âœ¦ Submit a Post</a></div>
    </nav>
    <button class="hamburger" onclick="document.getElementById('mob').classList.toggle('open')"><span></span><span></span><span></span></button>
  </div>
  <div class="mobile-menu" id="mob">
    <a href="/">Home</a>
    <a href="/journal/">Journal</a>
    <a href="/journal/?career=medicine" class="sub">ğŸ¥ Medicine</a>
    <a href="/journal/?career=law" class="sub">âš–ï¸ Law</a>
    <a href="/journal/?career=finance" class="sub">ğŸ“ˆ Finance</a>
    <a href="/journal/?career=psychology" class="sub">ğŸ§  Psychology</a>
    <a href="/journal/?career=computer-science" class="sub">ğŸ’» CS</a>
    <a href="/journal/?career=general" class="sub">ğŸ” General</a>
    <a href="/careers/">Careers</a>
    <a href="/about/">About</a>
    <a href="/join/">Join</a>
    <a href="/submit/">Submit a Post</a>
  </div>
</header>

<div class="page-wrap">
  <div class="page-header">
    <div class="section-label">For Members</div>
    <h1>Submit a Post</h1>
    <p>Write your piece below. Officers will review it and publish it to the Journal once approved. You will be notified via Remind.</p>
  </div>

  <div class="form-layout">
    <div>
      <div class="form-card">

        <div class="field">
          <label>Your Name (Author)</label>
          <input type="text" id="f-author" placeholder="e.g. Mehek Saini" oninput="updatePreview()" />
        </div>

        <div class="field field-row">
          <div>
            <label>Title</label>
            <input type="text" id="f-title" placeholder="Post title..." oninput="updatePreview()" />
          </div>
          <div>
            <label>Topic / Career</label>
            <select id="f-tag" onchange="updatePreview()">
              <option value="general">General</option>
              <option value="medicine">Medicine</option>
              <option value="law">Law</option>
              <option value="finance">Finance</option>
              <option value="psychology">Psychology</option>
              <option value="computer-science">Computer Science</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label>Short Description (1-2 sentences shown on card)</label>
          <input type="text" id="f-desc" placeholder="A brief summary of your post..." oninput="updatePreview()" maxlength="180" />
        </div>

        <div class="field">
          <label>Estimated Read Time (minutes)</label>
          <input type="number" id="f-time" value="4" min="1" max="30" oninput="updatePreview()" style="width:100px;" />
        </div>

        <div class="field">
          <label>Post Image</label>
          <p style="font-size:0.78rem;color:#6b6478;margin-bottom:0.6rem;">Choose an emoji for your card, or drag and drop a photo.</p>

          <div style="display:flex;gap:0.5rem;align-items:center;margin-bottom:0.5rem;">
            <div class="emoji-display" id="emoji-display">Â¶</div>
            <span style="font-size:0.78rem;color:#a09898;">Selected emoji</span>
          </div>

          <div class="emoji-picker" id="emoji-picker">
            <div class="emoji-opt selected" data-e="Â¶">Â¶</div>
            <div class="emoji-opt" data-e="ğŸ¥">ğŸ¥</div>
            <div class="emoji-opt" data-e="âš–ï¸">âš–ï¸</div>
            <div class="emoji-opt" data-e="ğŸ“ˆ">ğŸ“ˆ</div>
            <div class="emoji-opt" data-e="ğŸ§ ">ğŸ§ </div>
            <div class="emoji-opt" data-e="ğŸ’»">ğŸ’»</div>
            <div class="emoji-opt" data-e="ğŸŒ">ğŸŒ</div>
            <div class="emoji-opt" data-e="âœ¦">âœ¦</div>
            <div class="emoji-opt" data-e="ğŸ“š">ğŸ“š</div>
            <div class="emoji-opt" data-e="ğŸ”¬">ğŸ”¬</div>
            <div class="emoji-opt" data-e="âš—ï¸">âš—ï¸</div>
            <div class="emoji-opt" data-e="ğŸ­">ğŸ­</div>
            <div class="emoji-opt" data-e="ğŸ›ï¸">ğŸ›ï¸</div>
            <div class="emoji-opt" data-e="ğŸ’¡">ğŸ’¡</div>
            <div class="emoji-opt" data-e="âœï¸">âœï¸</div>
            <div class="emoji-opt" data-e="ğŸ“">ğŸ“</div>
          </div>

          <div class="or-divider">â€” or upload a photo â€”</div>

          <div class="drop-zone" id="drop-zone" onclick="document.getElementById('img-input').click()">
            <div style="font-size:1.6rem;">ğŸ“¸</div>
            <p>Click to upload or drag and drop a photo<br><span style="font-size:0.74rem;">JPG, PNG, WebP Â· max 5MB</span></p>
            <input type="file" id="img-input" accept="image/*" onchange="handleImg(this)" />
          </div>
          <img id="img-preview" class="img-preview" alt="preview" />
        </div>

        <div class="field">
          <label>Post Body</label>
          <textarea id="f-body" placeholder="Write your post here. Use blank lines to separate paragraphs. Officers will format it for the site."></textarea>
        </div>

        <button class="submit-btn" onclick="submitPost()">Submit for Review â†’</button>
      </div>
    </div>

    <!-- LIVE PREVIEW -->
    <div class="preview-panel">
      <div class="section-label">Live Preview</div>
      <div class="preview-card">
        <div class="preview-label">How your card will look</div>
        <div class="preview-img" id="prev-img">Â¶</div>
        <div class="preview-body">
          <span class="preview-tag" id="prev-tag">General</span>
          <div class="preview-title" id="prev-title">Your title will appear here</div>
          <div class="preview-desc" id="prev-desc">Your short description will appear here.</div>
          <div class="preview-meta" id="prev-meta">You Â· 4 min read</div>
        </div>
      </div>

      <div style="background:#fff;border:1px solid #e0dbd4;border-radius:3px;padding:1rem 1.1rem;margin-top:1rem;font-size:0.8rem;color:#6b6478;line-height:1.65;">
        <strong style="color:#1a1520;font-size:0.78rem;">What happens next?</strong><br><br>
        Officers will review your submission. If approved, it will be published to the Journal and you will be notified on Remind. Posts are typically reviewed within a few days.
      </div>
    </div>
  </div>
</div>

<div class="success-overlay" id="success">
  <div class="success-box">
    <div style="font-size:2rem;margin-bottom:0.5rem;">âœ¦</div>
    <h2>Post Submitted!</h2>
    <p>Your post is now in the officer review queue. You will be notified on Remind once it is approved and published.</p>
    <a href="/journal/">Browse the Journal â†’</a>
  </div>
</div>

<footer>
  <div class="footer-bottom">Â© 2025-2026 IndyPhilo Â· Independence High School Â· Frisco ISD</div>
</footer>

<script>
let selectedEmoji = 'Â¶';
let uploadedImage = null;

// Emoji picker
document.querySelectorAll('.emoji-opt').forEach(el => {
  el.addEventListener('click', () => {
    document.querySelectorAll('.emoji-opt').forEach(e=>e.classList.remove('selected'));
    el.classList.add('selected');
    selectedEmoji = el.dataset.e;
    uploadedImage = null;
    document.getElementById('img-preview').style.display = 'none';
    document.getElementById('emoji-display').textContent = selectedEmoji;
    updatePreview();
  });
});

// Drag and drop
const dz = document.getElementById('drop-zone');
dz.addEventListener('dragover', e => { e.preventDefault(); dz.classList.add('drag-over'); });
dz.addEventListener('dragleave', () => dz.classList.remove('drag-over'));
dz.addEventListener('drop', e => {
  e.preventDefault(); dz.classList.remove('drag-over');
  const file = e.dataTransfer.files[0];
  if (file && file.type.startsWith('image/')) processFile(file);
});

function handleImg(input) {
  if (input.files[0]) processFile(input.files[0]);
}

function processFile(file) {
  if (file.size > 5*1024*1024) { alert('Image too large. Max 5MB.'); return; }
  const reader = new FileReader();
  reader.onload = e => {
    uploadedImage = e.target.result;
    const prev = document.getElementById('img-preview');
    prev.src = uploadedImage;
    prev.style.display = 'block';
    document.querySelectorAll('.emoji-opt').forEach(x=>x.classList.remove('selected'));
    document.getElementById('emoji-display').textContent = 'ğŸ“¸';
    updatePreview();
  };
  reader.readAsDataURL(file);
}

function updatePreview() {
  const title = document.getElementById('f-title').value || 'Your title will appear here';
  const desc = document.getElementById('f-desc').value || 'Your short description will appear here.';
  const author = document.getElementById('f-author').value || 'You';
  const time = document.getElementById('f-time').value || 4;
  const tag = document.getElementById('f-tag').value;
  const tagLabel = tag.charAt(0).toUpperCase()+tag.slice(1).replace('-',' ');

  document.getElementById('prev-title').textContent = title;
  document.getElementById('prev-desc').textContent = desc;
  document.getElementById('prev-meta').textContent = `${author} Â· ${time} min read`;
  document.getElementById('prev-tag').textContent = tagLabel;

  const imgEl = document.getElementById('prev-img');
  imgEl.innerHTML = '';
  if (uploadedImage) {
    const img = document.createElement('img');
    img.src = uploadedImage;
    imgEl.appendChild(img);
    imgEl.style.padding = '0';
  } else {
    imgEl.textContent = selectedEmoji;
    imgEl.style.padding = '';
    const colors = { medicine:'#fdf0f0', law:'#f0effd', finance:'#f0fdf0', psychology:'#fdf5ee', 'computer-science':'#eef3fd', general:'#ede8f5' };
    imgEl.style.background = colors[tag] || '#ede8f5';
  }
}

function submitPost() {
  const title = document.getElementById('f-title').value.trim();
  const author = document.getElementById('f-author').value.trim();
  const desc = document.getElementById('f-desc').value.trim();
  const body = document.getElementById('f-body').value.trim();
  if (!title||!author||!desc||!body) { alert('Please fill in all fields before submitting.'); return; }

  const post = {
    id: 'sub-' + Date.now(),
    title, author, desc, body,
    tag: document.getElementById('f-tag').value,
    readTime: parseInt(document.getElementById('f-time').value)||4,
    emoji: uploadedImage ? 'ğŸ“¸' : selectedEmoji,
    emojiClass: document.getElementById('f-tag').value.replace('-','').replace('computer-science','cs'),
    image: uploadedImage || null,
    date: new Date().toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'}),
    status: 'pending',
    submittedAt: Date.now()
  };

  try {
    const queue = JSON.parse(localStorage.getItem('ip_queue') || '[]');
    queue.push(post);
    localStorage.setItem('ip_queue', JSON.stringify(queue));
    document.getElementById('success').classList.add('show');
  } catch(e) {
    alert('Submission stored. Officers will review shortly.');
  }
}

updatePreview();
</script>
</body>
</html>
